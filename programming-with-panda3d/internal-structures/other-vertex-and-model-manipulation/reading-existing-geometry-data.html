

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Reading existing geometry data &mdash; Panda3D Manual</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="Panda3D Manual" href="../../../index.html"/>
        <link rel="up" title="Other Vertex and Model Manipulation" href="index.html"/>
        <link rel="next" title="Modifying existing geometry data" href="modifying-existing-geometry-data.html"/>
        <link rel="prev" title="Other Vertex and Model Manipulation" href="index.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Panda3D
          

          
          </a>

          
            
            
              <div class="version">
                1.10
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../intro/index.html">Introduction to Panda3D</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Programming with Panda3D</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../the-scene-graph/index.html">The Scene Graph</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../the-configuration-file/index.html">The Configuration File</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../models-and-actors/index.html">Models and Actors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../render-attributes/index.html">Render Attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../texturing/index.html">Texturing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../shaders/index.html">Shaders</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../camera-control/index.html">Camera Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sound/index.html">Sound</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../intervals/index.html">Intervals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tasks-and-event-handling/index.html">Tasks and Event Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../text-and-image-rendering/index.html">Text and Image Rendering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../directgui/index.html">DirectGUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../render-effects/index.html">Render Effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../finite-state-machines/index.html">Finite State Machines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../terrain/index.html">Terrain</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Advanced operations with Panda3D&#8217;s internal structures</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../how-panda3d-stores-vertices-and-geometry/index.html">How Panda3D Stores Vertices and Geometry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../procedural-generation/index.html">Procedurally Generating 3D Models</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Other Vertex and Model Manipulation</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">Reading existing geometry data</a></li>
<li class="toctree-l4"><a class="reference internal" href="modifying-existing-geometry-data.html">Modifying existing geometry data</a></li>
<li class="toctree-l4"><a class="reference internal" href="meshdrawer.html">MeshDrawer</a></li>
<li class="toctree-l4"><a class="reference internal" href="more-about-geomvertexreader-geomvertexwriter-and-geomvertexrewriter.html">More about GeomVertexReader, GeomVertexWriter, and GeomVertexRewriter</a></li>
<li class="toctree-l4"><a class="reference internal" href="creating-new-textures-from-scratch.html">Creating New Textures from Scratch</a></li>
<li class="toctree-l4"><a class="reference internal" href="writing-3d-models-out-to-disk.html">Writing 3D Models out to Disk</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../render-to-texture-and-image-postprocessing/index.html">Render-to-Texture and Image Postprocessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../panda3d-rendering-process/index.html">Panda3D Rendering Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../panda3d-utility-functions.html">Panda3D Utility Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../particle-effects/index.html">Particle Effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../collision-detection/index.html">Collision Detection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../garbage-collection/index.html">Garbage Collection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware-support/index.html">Hardware support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../math-engine/index.html">Math Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../physics/index.html">Physics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../motion-paths.html">Motion Paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../timing/index.html">Timing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../networking/index.html">Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../multifiles/index.html">Multifiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../showbase.html">ShowBase</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../file-reading.html">File Reading</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../threading.html">Threading</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../subclassing.html">Subclassing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../table-of-features-supported-per-graphic-renderer.html">Table of features supported per graphic renderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pandai/index.html">Artificial Intelligence (PANDAI)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../distribution/index.html">Distributing Panda3D Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../samples/index.html">Sample Programs in the Distribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../debugging/index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../performance-tuning/index.html">Performance Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../using-c++/index.html">Using C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/index.html">Panda3D Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../building-from-source.html">Building Panda3D from Source</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cheat-sheets.html">Cheat Sheets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting-started-on-osx.html">Getting Started on OSX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../more-panda3d-resources.html">More Panda3D Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../thirdparty-licenses.html">Third-party dependencies and license info</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../the-irc-channel.html">The IRC Channel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">Panda3D</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Programming with Panda3D</a> &raquo;</li>
      
          <li><a href="../index.html">Advanced operations with Panda3D&#8217;s internal structures</a> &raquo;</li>
      
          <li><a href="index.html">Other Vertex and Model Manipulation</a> &raquo;</li>
      
    <li>Reading existing geometry data</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/programming-with-panda3d/internal-structures/other-vertex-and-model-manipulation/reading-existing-geometry-data.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="reading-existing-geometry-data">
<span id="id1"></span><h1>Reading existing geometry data<a class="headerlink" href="#reading-existing-geometry-data" title="Permalink to this headline">Â¶</a></h1>
<p>You can fairly easily extract and examine or operate on the vertices for an
existing model, although you should be aware that the order in which the
vertices appear in a model is undefined. There is no correlation between the
order in which vertices are listed in an egg file, and the order in which they
will appear in the resulting loaded model. Panda may rearrange the vertices,
or even add or remove vertices, as needed to optimize the model for rendering
performance. Even from one session to the next, the vertices might come out in
a different order.</p>
<p>This does make certain kinds of vertex operations difficult; if you plan to
write code that expects to encounter the vertices of a model in a particular
order, we recommend you build up those vertices yourself using a
<a class="reference internal" href="more-about-geomvertexreader-geomvertexwriter-and-geomvertexrewriter.html#more-about-geomvertexreader-geomvertexwriter-and-geomvertexrewriter"><span class="std std-ref">GeomVertexWriter</span></a>
(as described in <a class="reference internal" href="../procedural-generation/creating-and-filling-a-geomvertexdata.html#creating-and-filling-a-geomvertexdata"><span class="std std-ref">Creating and filling a GeomVertexData</span></a>), so that you
have explicit control over the vertex order.</p>
<p>However, if you have no need to operate on the vertices in any particular
order, or if you just want to casually browse the vertices in a model, feel
free to use the following instructions to read the data.</p>
<p>When you load a model, you have a handle to the root node of the model, which
is usually a ModelRoot node. The geometry itself will be stored in a series of
<a class="reference internal" href="../how-panda3d-stores-vertices-and-geometry/geomnode.html#geomnode"><span class="std std-ref">GeomNodes</span></a>, which will be children of the root node. In order
to examine the vertex data, you must visit the GeomNodes in the model. One way
to do this is to walk through all the GeomNodes like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">geomNodeCollection</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">findAllMatches</span><span class="p">(</span><span class="s1">&#39;**/+GeomNode&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">nodePath</span> <span class="ow">in</span> <span class="n">geomNodeCollection</span><span class="o">.</span><span class="n">asList</span><span class="p">():</span>
  <span class="n">geomNode</span> <span class="o">=</span> <span class="n">nodePath</span><span class="o">.</span><span class="n">node</span><span class="p">()</span>
  <span class="n">processGeomNode</span><span class="p">(</span><span class="n">geomNode</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">NodePathCollection</span> <span class="n">geomNodeCollection</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="n">find_all_matches</span><span class="p">(</span><span class="s">&quot;**/+GeomNode&quot;</span><span class="p">);</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">geomNodeCollection</span><span class="p">.</span><span class="n">get_num_paths</span><span class="p">();</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="n">PT</span><span class="p">(</span><span class="n">GeomNode</span><span class="p">)</span> <span class="n">g</span> <span class="o">=</span> <span class="n">DCAST</span><span class="p">(</span><span class="n">GeomNode</span><span class="p">,</span><span class="n">geomNodeCollection</span><span class="p">.</span><span class="n">get_path</span><span class="p">(</span><span class="n">i</span><span class="p">).</span><span class="n">node</span><span class="p">());</span>
        <span class="n">processGeomNode</span><span class="p">(</span><span class="n">g</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>Once you have a particular GeomNode, you must walk through the list of
<a class="reference internal" href="../how-panda3d-stores-vertices-and-geometry/geom.html#geom"><span class="std std-ref">Geoms</span></a> stored on that node. Each Geom also has an associated
RenderState, which controls the visible appearance of that Geom (e.g. texture,
backfacing, etc.).</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">processGeomNode</span><span class="p">(</span><span class="n">geomNode</span><span class="p">):</span>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">geomNode</span><span class="o">.</span><span class="n">getNumGeoms</span><span class="p">()):</span>
    <span class="n">geom</span> <span class="o">=</span> <span class="n">geomNode</span><span class="o">.</span><span class="n">getGeom</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">state</span> <span class="o">=</span> <span class="n">geomNode</span><span class="o">.</span><span class="n">getGeomState</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">geom</span>
    <span class="k">print</span> <span class="n">state</span>
    <span class="n">processGeom</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">processGeomNode</span><span class="p">(</span><span class="n">GeomNode</span> <span class="o">*</span><span class="n">geomnode</span><span class="p">)</span>
<span class="p">{</span>
     <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="n">geomnode</span><span class="p">.</span><span class="n">get_num_geoms</span><span class="p">();</span><span class="n">j</span><span class="o">++</span><span class="p">){</span>
         <span class="k">const</span> <span class="n">PT</span><span class="p">(</span><span class="n">Geom</span><span class="p">)</span> <span class="n">geom</span> <span class="o">=</span> <span class="n">geomnode</span><span class="p">.</span><span class="n">get_geom</span><span class="p">(</span><span class="n">j</span><span class="p">);</span>
         <span class="n">geom</span><span class="o">-&gt;</span><span class="n">write</span><span class="p">(</span><span class="n">nout</span><span class="p">);</span><span class="c1">//outputs basic info on the geom</span>
         <span class="n">geomnode</span><span class="p">.</span><span class="n">get_geom_state</span><span class="p">(</span><span class="n">j</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">write</span><span class="p">(</span><span class="n">nout</span><span class="p">);</span><span class="c1">//basic renderstate info</span>
         <span class="n">processGeom</span><span class="p">(</span><span class="n">geom</span><span class="p">);</span>
     <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Note that geomNode.getGeom() is only appropriate if you will be reading, but
not modifying, the data. If you intend to modify the geom data in any way
(including any nested data like vertices or primitives), you should use
geomNode.modifyGeom() instead.</p>
<p>Each Geom has an associated <a class="reference internal" href="../how-panda3d-stores-vertices-and-geometry/geomvertexdata.html#geomvertexdata"><span class="std std-ref">GeomVertexData</span></a>, and one or more
<a class="reference internal" href="../how-panda3d-stores-vertices-and-geometry/geomprimitive.html#geomprimitive"><span class="std std-ref">GeomPrimitives</span></a>. Some GeomVertexData objects may be
shared by more than one Geom, especially if you have used flattenStrong() to
optimize a model.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">processGeom</span><span class="p">(</span><span class="n">geom</span><span class="p">):</span>
  <span class="n">vdata</span> <span class="o">=</span> <span class="n">geom</span><span class="o">.</span><span class="n">getVertexData</span><span class="p">()</span>
  <span class="k">print</span> <span class="n">vdata</span>
  <span class="n">processVertexData</span><span class="p">(</span><span class="n">vdata</span><span class="p">)</span>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">geom</span><span class="o">.</span><span class="n">getNumPrimitives</span><span class="p">()):</span>
    <span class="n">prim</span> <span class="o">=</span> <span class="n">geom</span><span class="o">.</span><span class="n">getPrimitive</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">prim</span>
    <span class="n">processPrimitive</span><span class="p">(</span><span class="n">prim</span><span class="p">,</span> <span class="n">vdata</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">processGeom</span><span class="p">(</span><span class="n">Geom</span> <span class="o">*</span><span class="n">geom</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">const</span> <span class="n">PT</span><span class="p">(</span><span class="n">GeomVertexData</span><span class="p">)</span> <span class="n">vdata</span> <span class="o">=</span> <span class="n">geom</span><span class="o">-&gt;</span><span class="n">get_vertex_data</span><span class="p">();</span>
    <span class="n">vdata</span><span class="o">-&gt;</span><span class="n">write</span><span class="p">(</span><span class="n">nout</span><span class="p">);</span>
    <span class="n">processVertexData</span><span class="p">(</span><span class="n">vdata</span><span class="p">);</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">geom</span><span class="p">.</span><span class="n">get_num_primitives</span><span class="p">();</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
     <span class="k">const</span> <span class="n">PT</span><span class="p">(</span><span class="n">GeomPrimitive</span><span class="p">)</span> <span class="n">prim</span> <span class="o">=</span> <span class="n">geom</span><span class="o">-&gt;</span><span class="n">get_primitive</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
     <span class="n">prim</span><span class="o">-&gt;</span><span class="n">write</span><span class="p">(</span><span class="n">nout</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
     <span class="n">processPrimitive</span><span class="p">(</span><span class="n">prim</span><span class="p">,</span> <span class="n">vdata</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>As above, get_vertex_data() is only appropriate if you will only be reading,
but not modifying, the vertex data. Similarly, getPrimitive() is appropriate
only if you will not be modifying the primitive index array. If you intend to
modify either one, use modifyVertexData() or modifyPrimitive(), respectively.</p>
<p>You can use the
<a class="reference internal" href="more-about-geomvertexreader-geomvertexwriter-and-geomvertexrewriter.html#more-about-geomvertexreader-geomvertexwriter-and-geomvertexrewriter"><span class="std std-ref">GeomVertexReader</span></a>
class to examine the vertex data. You should create a GeomVertexReader for
each column of the data you intend to read. It is up to you to ensure that a
given column exists in the vertex data before you attempt to read it (you can
use vdata.hasColumn() to test this).</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">processVertexData</span><span class="p">(</span><span class="n">vdata</span><span class="p">):</span>
  <span class="n">vertex</span> <span class="o">=</span> <span class="n">GeomVertexReader</span><span class="p">(</span><span class="n">vdata</span><span class="p">,</span> <span class="s1">&#39;vertex&#39;</span><span class="p">)</span>
  <span class="n">texcoord</span> <span class="o">=</span> <span class="n">GeomVertexReader</span><span class="p">(</span><span class="n">vdata</span><span class="p">,</span> <span class="s1">&#39;texcoord&#39;</span><span class="p">)</span>
  <span class="k">while</span> <span class="ow">not</span> <span class="n">vertex</span><span class="o">.</span><span class="n">isAtEnd</span><span class="p">():</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">vertex</span><span class="o">.</span><span class="n">getData3f</span><span class="p">()</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">texcoord</span><span class="o">.</span><span class="n">getData2f</span><span class="p">()</span>
    <span class="k">print</span> <span class="s2">&quot;v = </span><span class="si">%s</span><span class="s2">, t = </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="nb">repr</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">processVertexData</span><span class="p">(</span><span class="k">const</span> <span class="n">GeomVertexData</span> <span class="o">*</span><span class="n">vdata</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">GeomVertexReader</span> <span class="n">vertex</span> <span class="o">=</span> <span class="n">GeomVertexReader</span><span class="p">(</span><span class="n">vdata</span><span class="p">,</span><span class="s">&quot;vertex&quot;</span><span class="p">);</span>
    <span class="n">GeomVertexReader</span> <span class="n">texcoord</span> <span class="o">=</span> <span class="n">GeomVertexReader</span><span class="p">(</span><span class="n">vdata</span><span class="p">,</span><span class="s">&quot;texcoord&quot;</span><span class="p">);</span>
    <span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="n">vertex</span><span class="p">.</span><span class="n">is_at_end</span><span class="p">()){</span>
        <span class="n">LVector3f</span> <span class="n">v</span> <span class="o">=</span> <span class="n">vertex</span><span class="p">.</span><span class="n">get_data3f</span><span class="p">();</span>
        <span class="n">LVector3f</span> <span class="n">t</span> <span class="o">=</span> <span class="n">texcoord</span><span class="p">.</span><span class="n">get_data2f</span><span class="p">();</span>
        <span class="n">nout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;V = &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">v</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;T = &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">t</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Each GeomPrimitive may be any of a handful of different classes, according to
the primitive type it is; but all GeomPrimitive classes have the same common
interface to walk through the list of vertices referenced by the primitives
stored within the class.</p>
<p>You can use the setRow() method of GeomVertexReader to set the reader to a
particular vertex. This affects the next call to getData(). In this way, you
can extract the vertex data for the vertices in the order that the primitive
references them (instead of in order from the beginning to the end of the
vertex table, as above).</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">processPrimitive</span><span class="p">(</span><span class="n">prim</span><span class="p">,</span> <span class="n">vdata</span><span class="p">):</span>
  <span class="n">vertex</span> <span class="o">=</span> <span class="n">GeomVertexReader</span><span class="p">(</span><span class="n">vdata</span><span class="p">,</span> <span class="s1">&#39;vertex&#39;</span><span class="p">)</span>

  <span class="n">prim</span> <span class="o">=</span> <span class="n">prim</span><span class="o">.</span><span class="n">decompose</span><span class="p">()</span>

  <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">prim</span><span class="o">.</span><span class="n">getNumPrimitives</span><span class="p">()):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">prim</span><span class="o">.</span><span class="n">getPrimitiveStart</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
    <span class="n">e</span> <span class="o">=</span> <span class="n">prim</span><span class="o">.</span><span class="n">getPrimitiveEnd</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
      <span class="n">vi</span> <span class="o">=</span> <span class="n">prim</span><span class="o">.</span><span class="n">getVertex</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
      <span class="n">vertex</span><span class="o">.</span><span class="n">setRow</span><span class="p">(</span><span class="n">vi</span><span class="p">)</span>
      <span class="n">v</span> <span class="o">=</span> <span class="n">vertex</span><span class="o">.</span><span class="n">getData3f</span><span class="p">()</span>
      <span class="k">print</span> <span class="s2">&quot;prim </span><span class="si">%s</span><span class="s2"> has vertex </span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">vi</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">processPrimitive</span><span class="p">(</span><span class="k">const</span> <span class="n">GeomPrimitive</span> <span class="o">*</span><span class="n">prim</span><span class="p">,</span><span class="k">const</span> <span class="n">GeomVertexData</span> <span class="o">*</span><span class="n">vdata</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">GeomVertexReader</span> <span class="n">vertex</span> <span class="o">=</span> <span class="n">GeomVertexReader</span><span class="p">(</span><span class="n">vdata</span><span class="p">,</span><span class="s">&quot;vertex&quot;</span><span class="p">);</span>
   <span class="c1">//Note: There should be prim = prim-&gt;decompose(); here,it wouldnt work</span>
   <span class="c1">//for me but i use the cvs panda and that could have been broken at this time.</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">k</span> <span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">k</span><span class="o">&lt;</span><span class="n">prim</span><span class="o">-&gt;</span><span class="n">get_num_primitives</span><span class="p">();</span><span class="n">k</span><span class="o">++</span><span class="p">){</span>
        <span class="kt">int</span> <span class="n">s</span> <span class="o">=</span> <span class="n">prim</span><span class="o">-&gt;</span><span class="n">get_primitive_start</span><span class="p">(</span><span class="n">k</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">e</span> <span class="o">=</span> <span class="n">prim</span><span class="o">-&gt;</span><span class="n">get_primitive_end</span><span class="p">(</span><span class="n">k</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">s</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">e</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
            <span class="kt">int</span> <span class="n">vi</span> <span class="o">=</span> <span class="n">prim</span><span class="o">-&gt;</span><span class="n">get_vertex</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>
            <span class="n">vertex</span><span class="p">.</span><span class="n">set_row</span><span class="p">(</span><span class="n">vi</span><span class="p">);</span>
            <span class="n">LVector3f</span> <span class="n">v</span> <span class="o">=</span> <span class="n">vertex</span><span class="p">.</span><span class="n">get_data3f</span><span class="p">();</span>
            <span class="n">nout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;prim &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">k</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; has vertex &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">vi</span> <span class="o">&lt;&lt;</span><span class="s">&quot;: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">v</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You may find the call to prim.decompose() useful (as shown in the above
example). This call automatically decomposes higher-order primitive types,
like GeomTristrips and GeomTrifans, into the equivalent component primitive
types, like GeomTriangles; but when called on a GeomTriangles, it returns the
GeomTriangles object unchanged. Similarly, GeomLinestrips will be decomposed
into GeomLines. This way you can write code that doesn&#8217;t have to know anything
about GeomTristrips and GeomTrifans, which are fairly complex; it can assume
it will only get the much simpler GeomTriangles (or, in the case of lines or
points, GeomLines and GeomPoints, respectively).</p>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="modifying-existing-geometry-data.html" class="btn btn-neutral float-right" title="Modifying existing geometry data" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Other Vertex and Model Manipulation" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Panda3D.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'1.10.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>