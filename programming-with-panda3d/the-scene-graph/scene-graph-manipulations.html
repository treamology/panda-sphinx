

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Scene Graph Manipulations &mdash; Panda3D Manual</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Panda3D Manual" href="../../index.html"/>
        <link rel="up" title="The Scene Graph" href="index.html"/>
        <link rel="next" title="Common State Changes" href="common-state-changes.html"/>
        <link rel="prev" title="The Scene Graph" href="index.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Panda3D
          

          
          </a>

          
            
            
              <div class="version">
                1.10
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../intro/index.html">Introduction to Panda3D</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Programming with Panda3D</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">The Scene Graph</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Scene Graph Manipulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="common-state-changes.html">Common State Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="manipulating-a-piece-of-a-model.html">Manipulating a Piece of a Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="searching-the-scene-graph.html">Searching the Scene Graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="instancing.html">Instancing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../the-configuration-file/index.html">The Configuration File</a></li>
<li class="toctree-l2"><a class="reference internal" href="../models-and-actors/index.html">Models and Actors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../render-attributes/index.html">Render Attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../texturing/index.html">Texturing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shaders/index.html">Shaders</a></li>
<li class="toctree-l2"><a class="reference internal" href="../camera-control/index.html">Camera Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sound/index.html">Sound</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intervals/index.html">Intervals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tasks-and-event-handling/index.html">Tasks and Event Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../text-and-image-rendering/index.html">Text and Image Rendering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../directgui/index.html">DirectGUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../render-effects/index.html">Render Effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../finite-state-machines/index.html">Finite State Machines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../terrain/index.html">Terrain</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internal-structures/index.html">Advanced operations with Panda3D&#8217;s internal structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../render-to-texture-and-image-postprocessing/index.html">Render-to-Texture and Image Postprocessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../panda3d-rendering-process/index.html">Panda3D Rendering Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../panda3d-utility-functions.html">Panda3D Utility Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../particle-effects/index.html">Particle Effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../collision-detection/index.html">Collision Detection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../garbage-collection/index.html">Garbage Collection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hardware-support/index.html">Hardware support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../math-engine/index.html">Math Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../physics/index.html">Physics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../motion-paths.html">Motion Paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="../timing/index.html">Timing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../networking/index.html">Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multifiles/index.html">Multifiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../showbase.html">ShowBase</a></li>
<li class="toctree-l2"><a class="reference internal" href="../file-reading.html">File Reading</a></li>
<li class="toctree-l2"><a class="reference internal" href="../threading.html">Threading</a></li>
<li class="toctree-l2"><a class="reference internal" href="../subclassing.html">Subclassing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../table-of-features-supported-per-graphic-renderer.html">Table of features supported per graphic renderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pandai/index.html">Artificial Intelligence (PANDAI)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../distribution/index.html">Distributing Panda3D Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../samples/index.html">Sample Programs in the Distribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../debugging/index.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../performance-tuning/index.html">Performance Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../using-c++/index.html">Using C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Panda3D Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../building-from-source.html">Building Panda3D from Source</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cheat-sheets.html">Cheat Sheets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started-on-osx.html">Getting Started on OSX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../more-panda3d-resources.html">More Panda3D Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../thirdparty-licenses.html">Third-party dependencies and license info</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../the-irc-channel.html">The IRC Channel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">Panda3D</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Programming with Panda3D</a> &raquo;</li>
      
          <li><a href="index.html">The Scene Graph</a> &raquo;</li>
      
    <li>Scene Graph Manipulations</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/programming-with-panda3d/the-scene-graph/scene-graph-manipulations.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="scene-graph-manipulations">
<span id="id1"></span><h1>Scene Graph Manipulations<a class="headerlink" href="#scene-graph-manipulations" title="Permalink to this headline">¶</a></h1>
<div class="section" id="the-default-scene-graphs">
<h2>The default scene graphs<a class="headerlink" href="#the-default-scene-graphs" title="Permalink to this headline">¶</a></h2>
<p>By default, there are two different scene graphs created automatically when
you start up Panda3D. These graphs are referred to by their top nodes: render
and render2d.</p>
<p>You use render most often; this is the top of the ordinary 3-D scene. In order
to put an object in the world, you will need to parent it to render (or to
some node that is in turn parented to render).</p>
<p>You will use render2d to render 2-D GUI elements, such as text or buttons,
that you want to display onscreen; for instance, a heads-up display. Anything
parented to render2d will be rendered on top of the 3-D scene, as if it were
painted on the screen glass.</p>
<p>The coordinate system of render2d is set up to match that of the mouse inputs:
the lower-left corner of the screen is (-1, 0, -1), and the upper-right corner
is (1, 0, 1). Since this is a square coordinate system, but the screen is
usually non-square, objects parented directly to render2d may appear squashed.
For this reason, Panda3D also defines a child of render2d, called aspect2d,
which has a scale applied to it to correct the non-square aspect ratio of
render2d. Most often, you will parent GUI elements to aspect2d rather than
render2d.</p>
<p>Specifically, the coordinate system of aspect2d is by default scaled such that
x ranges over [-ratio,ratio], and y ranges over [-1,1] where ratio is
screen_size_x/screen_size_y (in the normal case of a window wider than it
is tall).</p>
<p>As of Panda3D version 1.7.0, there is another child of render2d, called
pixel2d. This is scaled in such a way that one Panda unit represents one pixel
in the window. The origin, (0, 0, 0) is in the upperleft corner of the window.
The lower right corner has x and z values equal to the width and -height of
the window respectively. As Panda3D uses a Z-Up Right coordinate system, the Y
coordinate in the window will actually be the inverted Z coordinate in Panda.
This node is especially helpful when you want to do pixel-perfect positioning
and scaling.</p>
<p>Finally, you may see references to one other top-level node called hidden.
This is simply an ordinary node that has no rendering properties set up for
it, so that things parented to hidden will not be rendered. Older Panda3D code
needed to use hidden to remove a node from the render scene graph. However,
this is no longer necessary, and its use is not recommended for new programs;
the best way to remove a node from render is to call
nodePath.detach</p>
<p>N</p>
<p>_n</p>
<p>ode().</p>
</div>
<div class="section" id="loading-models">
<h2>Loading models<a class="headerlink" href="#loading-models" title="Permalink to this headline">¶</a></h2>
<p>You can load up a model with a filename path, in the
<a class="reference internal" href="../models-and-actors/loading-models.html#loading-models"><span class="std std-ref">Panda Filename Syntax</span></a>, to the model&#8217;s egg or bam file.
In many examples, the filename extension is omitted; in this case, Panda will
look for a file with either the .egg or .bam extension.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">myNodePath</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">loadModel</span><span class="p">(</span><span class="s2">&quot;path/to/models/myModel.egg&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">NodePath</span> <span class="n">myNodePath</span> <span class="o">=</span>
  <span class="n">window</span><span class="o">-&gt;</span><span class="n">load_model</span><span class="p">(</span><span class="n">framework</span><span class="p">.</span><span class="n">get_models</span><span class="p">(),</span><span class="s">&quot;path/to/models/myModel.egg&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>The first time you call <code class="docutils literal"><span class="pre">loadModel()</span></code>
for a particular model, that model is read and saved in a table in memory; on
each subsequent call, the model is simply copied from the table, instead of
reading the file.</p>
<p>The above call is appropriate for loading static models; for animated models,
see <a class="reference internal" href="../models-and-actors/loading-actors-and-animations.html#loading-actors-and-animations"><span class="std std-ref">Loading Actors and Animations</span></a>.</p>
</div>
<div class="section" id="reparenting-nodes-and-models">
<h2>Reparenting nodes and models<a class="headerlink" href="#reparenting-nodes-and-models" title="Permalink to this headline">¶</a></h2>
<p>One of the most fundamental scene graph manipulations is changing a node&#8217;s
parent. You need to do this at least once after you load a model, to put it
under render for viewing:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">myModel</span><span class="o">.</span><span class="n">reparentTo</span><span class="p">(</span><span class="n">render</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">myModel</span><span class="p">.</span><span class="n">reparent_to</span><span class="p">(</span><span class="n">window</span><span class="o">-&gt;</span><span class="n">get_render</span><span class="p">());</span>
</pre></div>
</div>
<p>And to remove it again:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">myModel</span><span class="o">.</span><span class="n">detachNode</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">myModel</span><span class="p">.</span><span class="n">detach_node</span><span class="p">();</span>
</pre></div>
</div>
<p>To completely remove a NodePath from the scene graph and memory call
remove</p>
<p>N</p>
<p>_n</p>
<p>ode, this has the
effect of emptying the node and releasing the memory taken up by the node. Use
it only when you have no further use for the node:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">myModel</span><span class="o">.</span><span class="n">removeNode</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">myModel</span><span class="p">.</span><span class="n">remove_node</span><span class="p">();</span>
</pre></div>
</div>
<p>As you become more comfortable with scene graph operations, you may find
yourself taking more and more advantage of a deeply nested scene graph, and
you may start to parent your models to other nodes than just render. Sometimes
it is convenient to create an empty node for this purpose, for instance, to
group several models together:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">dummyNode</span> <span class="o">=</span> <span class="n">render</span><span class="o">.</span><span class="n">attachNewNode</span><span class="p">(</span><span class="s2">&quot;Dummy Node Name&quot;</span><span class="p">)</span>
<span class="n">myModel</span><span class="o">.</span><span class="n">reparentTo</span><span class="p">(</span><span class="n">dummyNode</span><span class="p">)</span>
<span class="n">myOtherModel</span><span class="o">.</span><span class="n">reparentTo</span><span class="p">(</span><span class="n">dummyNode</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">NodePath</span> <span class="n">dummyNode</span> <span class="o">=</span> <span class="n">window</span><span class="o">-&gt;</span><span class="n">get_render</span><span class="p">().</span><span class="n">attach_new_node</span><span class="p">(</span><span class="s">&quot;Dummy Node Name&quot;</span><span class="p">);</span>
<span class="n">myModel</span><span class="p">.</span><span class="n">reparent_to</span><span class="p">(</span><span class="n">dummyNode</span><span class="p">);</span>
<span class="n">myOtherModel</span><span class="p">.</span><span class="n">reparent_to</span><span class="p">(</span><span class="n">dummyNode</span><span class="p">);</span>
</pre></div>
</div>
<p>Since a node inherits its position information from its parent node, when you
reparent a node in the scene graph you might inadvertently change its position
in the world. If you need to avoid this, you can use a special variant on
reparentTo():</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">myModel</span><span class="o">.</span><span class="n">wrtReparentTo</span><span class="p">(</span><span class="n">newParent</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">myModel</span><span class="p">.</span><span class="n">wrt_reparent_to</span><span class="p">(</span><span class="n">newParent</span><span class="p">);</span>
</pre></div>
</div>
<p>The &#8220;wrt&#8221; prefix stands for &#8220;with respect to&#8221;. This special method works like
reparent_to(), except that it automatically recomputes the local transform on
myModel to compensate for the change in transform under the new parent, so
that the node ends up in the same position relative to the world.</p>
<p>Note that the computation required to perform wrtReparentTo() is a
floating-point matrix computation and is therefore inherently imprecise. This
means that if you use wrtReparentTo() repeatedly, thousands of times on the
same node, it may eventually accumulate enough numerical inaccuracies to
introduce a slight scale on the object (for instance, a scale of 1, 1,
0.99999); if left unchecked, this scale could eventually become noticeable.</p>
<p>Beginners tend to overuse this method; you should not use wrtReparentTo()
unless there is a real reason to use it.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="common-state-changes.html" class="btn btn-neutral float-right" title="Common State Changes" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="The Scene Graph" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Panda3D.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.10.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>